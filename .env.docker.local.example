# Agent Identity & Docker Configuration
# Copy to .env.docker.local and set your agent name
#
# This file configures:
# - Agent identity (used for DNS routing, tmux sessions, Docker containers)
# - Port assignments (derived from BASE_PORT)
# - Service domains (orchestrator proxy routing)

# =============================================================================
# AGENT IDENTITY (REQUIRED)
# =============================================================================
AGENT_NAME=your-agent-name

# Base port - all other ports are derived from this
# Each agent should use a unique BASE_PORT to avoid conflicts
# Examples: mark=3010, james=3020, luke=3030
BASE_PORT=3010

# =============================================================================
# DERIVED PORTS (auto-calculated from BASE_PORT)
# =============================================================================
# Uncomment only if you need to override specific ports
# NEXTJS_PORT=3010                    # BASE_PORT + 0
# CONVEX_ADMIN_PORT=3220              # BASE_PORT + 210
# CONVEX_HTTP_PORT=3221               # BASE_PORT + 211
# CONVEX_DASHBOARD_PORT=6801          # BASE_PORT + 3791
# MAILPIT_WEB_PORT=8035               # BASE_PORT + 5025
# MAILPIT_SMTP_PORT=4035              # BASE_PORT + 1025

# =============================================================================
# SERVICE DOMAINS (orchestrator proxy routing)
# =============================================================================
# These use ${AGENT_NAME} - scripts will substitute automatically
SITE_URL=http://${AGENT_NAME}.loc
CONVEX_CLOUD_URL=http://${AGENT_NAME}.convex.cloud.loc
CONVEX_SITE_URL=http://${AGENT_NAME}.convex.site.loc
MAILPIT_URL=http://${AGENT_NAME}.mailpit.loc

# Shared services (same for all agents)
NOVU_API_URL=http://api.novu.loc
NOVU_WS_URL=http://ws.novu.loc
NOVU_CONSOLE_URL=http://novu.loc

# =============================================================================
# DOCKER COMPOSE
# =============================================================================
INSTANCE_NAME=artifact-review-local
# NOTE: Do NOT set INSTANCE_SECRET - container generates on first start

# =============================================================================
# TLS CERTIFICATES (for resend-proxy)
# =============================================================================
# Path to mkcert certificates (shared via orchestrator repo)
MKCERT_CERTS_PATH=../artifact-review-orchestrator/certs

# =============================================================================
# RESEND PROXY NETWORK (agent-specific to avoid conflicts)
# =============================================================================
# Each agent needs a unique subnet for the resend-proxy Docker network
# This prevents "Pool overlaps" errors when multiple agents run simultaneously
# Assign unique subnets per agent: mark=172.29, james=172.28, luke=172.30, etc.
RESEND_NETWORK_SUBNET=172.28.0.0/16
RESEND_PROXY_IP=172.28.0.10
